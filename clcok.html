<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>ğŸŒ™ å¤œé—´ä¸“å±å¯†ç å…¥å£</title>
  <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.1.1/crypto-js.min.js"></script>
  <style>
    body {
      font-family: "å¾®è½¯é›…é»‘", sans-serif;
      background-color: #111;
      color: white;
      text-align: center;
      padding-top: 100px;
    }
    input, button {
      padding: 10px;
      font-size: 16px;
      margin: 10px;
    }
    #message {
      margin-top: 20px;
      font-size: 18px;
      color: #ff8;
    }
  </style>
</head>
<body>
  <h1>ğŸŒ™ å¤œé—´ä¸“å±å¯†ç å…¥å£</h1>

  <input type="text" id="passwordInput" placeholder="è¯·è¾“å…¥å¯†ç ">
  <br>

  <button onclick="savePassword()">ğŸ’¾ ä¿å­˜å¯†ç </button>
  <button onclick="changePassword()">ğŸ” æ›´æ¢å¯†ç </button>
  <button onclick="viewPassword()">ğŸ‘ï¸ æŸ¥çœ‹å¯†ç </button>

  <div id="message"></div>

  <script>
    const encryptionKey = "SukiOnlyForHubbyğŸ’—";

    function isNightTime() {
      const now = new Date();
const utc = now.getTime() + now.getTimezoneOffset() * 60000;
const beijingTime = new Date(utc + 8 * 60 * 60 * 1000);
const hour = beijingTime.getUTCHours();

      return (hour >= 23 || hour < 7); // å¤œé—´æ—¶é—´æ®µåˆ¤æ–­
    }

    function savePassword() {
      const pwd = document.getElementById("passwordInput").value.trim();
      const msg = document.getElementById("message");

      if (!pwd) {
        msg.innerHTML = "â—è¯·è¾“å…¥å¯†ç å†ä¿å­˜å“¦ï½";
        return;
      }

      const encrypted = CryptoJS.AES.encrypt(pwd, encryptionKey).toString();
      localStorage.setItem("nightPassword", encrypted);

      msg.innerHTML = "âœ… å¯†ç å·²åŠ å¯†ä¿å­˜ï½åªæœ‰æ™šä¸Šæ‰èƒ½æŸ¥çœ‹çœ‹å“¦ğŸ’¤";
      document.getElementById("passwordInput").value = ""; // è‡ªåŠ¨æ¸…ç©º
    }

    function changePassword() {
      const pwd = document.getElementById("passwordInput").value.trim();
      const msg = document.getElementById("message");

      if (!pwd) {
        msg.innerHTML = "â—è¯·è¾“å…¥æ–°å¯†ç å†æ›´æ¢ï½";
        return;
      }

      const encrypted = CryptoJS.AES.encrypt(pwd, encryptionKey).toString();
      localStorage.setItem("nightPassword", encrypted);

      msg.innerHTML = "ğŸ”„ å¯†ç å·²æˆåŠŸæ›´æ¢ï½";
      document.getElementById("passwordInput").value = "";
    }

    function viewPassword() {
      const msg = document.getElementById("message");

      if (!isNightTime()) {
        msg.innerHTML = "â›” å½“å‰æ—¶é—´ä¸å…è®¸æŸ¥çœ‹å¯†ç ï¼Œè¯·åœ¨ 23:00 ï½ 07:00 ä¹‹é—´å†è¯•ï½";
        return;
      }

      const encrypted = localStorage.getItem("nightPassword");

      if (!encrypted) {
        msg.innerHTML = "ğŸ”’ æš‚æ— ä¿å­˜çš„å¯†ç ï¼Œè¯·å…ˆè®¾ç½®å“¦ï½";
        return;
      }

      try {
        const decrypted = CryptoJS.AES.decrypt(encrypted, encryptionKey);
        const originalPwd = decrypted.toString(CryptoJS.enc.Utf8);
        msg.innerHTML = `ğŸŒ™ å½“å‰å¯†ç æ˜¯ï¼š<strong>${originalPwd}</strong>`;
      } catch (e) {
        msg.innerHTML = "âŒ å¯†ç è§£å¯†å¤±è´¥ï¼Œå¯èƒ½æ•°æ®æŸåæˆ–åŠ å¯†æ–¹å¼é”™è¯¯";
      }
    }
  </script>
</body>
</html>
