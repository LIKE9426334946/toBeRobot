<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>打卡进度 · 从 2025-08-10 到 2030 今天</title>
<style>
  :root{
    --bg:#0f1221;
    --card:#151936;
    --soft:#1c2147;
    --text:#e9ecff;
    --muted:#b5b9d9;
    --brand:#6c8cff;
    --brand-2:#70e1ff;
    --ok:#3ddc97;
    --border:rgba(255,255,255,.08);
    --shadow:0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03);
    --radius:14px;
  }
  *{box-sizing:border-box}
  body{
  padding-top: 60px; /* 根据.stats高度调整 */
    margin:0; background: radial-gradient(1200px 800px at 20% -10%,#1a1f45 0%,#0f1221 50%, #0d0f1a 100%), var(--bg);
    color:var(--text); font: 15px/1.6 system-ui,-apple-system,Segoe UI,PingFang SC,Microsoft YaHei,Arial;
  }
  .wrap{max-width:1100px; margin:40px auto; padding:0 16px}
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0)) , var(--card);
    border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow);
    overflow:hidden;
  }
  header{
    display:flex; gap:12px; flex-wrap:wrap; align-items:center; padding:18px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,0) 60%);
  }
  header h1{font-size:18px; margin:0 8px 0 0; letter-spacing:.5px}
  .row{display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-left:auto}
  label{color:var(--muted); font-size:13px}
  select{
    appearance:none; border:1px solid var(--border); background:var(--soft); color:var(--text);
    padding:10px 12px; border-radius:10px; outline:none; min-width:150px;
  }
  button{
    background: linear-gradient(90deg,var(--brand),var(--brand-2));
    color:#0b0e1a; border:0; padding:10px 14px; border-radius:10px; font-weight:700; cursor:pointer;
    transition: transform .05s ease;
  }
  button:active{transform: translateY(1px)}


  .stats{
    display:flex; align-items:center; gap:16px; padding:14px 18px; border-bottom:1px solid var(--border); background:rgba(255,255,255,.01)
  }
  .stats {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100;
  background: rgba(15, 18, 33, 0.9);
  backdrop-filter: blur(8px);
}


  .pill{
    background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    border:1px solid var(--border); padding:8px 12px; border-radius:999px; color:var(--muted)
  }
  .strong{color:var(--text); font-weight:700}
  .bar{
    position:relative; flex:1; height:12px; background:#10132b; border:1px solid var(--border); border-radius:999px; overflow:hidden;
  }
  .bar>i{
    position:absolute; inset:0 auto 0 0; width:0%; background:linear-gradient(90deg, var(--ok), #9af7c9);
  }
  .table{
    width:100%; border-collapse:separate; border-spacing:0; font-feature-settings:"tnum"; font-variant-numeric:tabular-nums;
  }
  .table thead th{
    text-align:left; padding:12px 14px; font-size:12px; color:var(--muted); background:rgba(255,255,255,.02);
    position:sticky; top:0; z-index:1; backdrop-filter:saturate(140%) blur(6px); border-bottom:1px solid var(--border);
  }
  .table tbody td{
    padding:12px 14px; border-bottom:1px solid var(--border);
  }
  .table tbody tr:hover{background:rgba(255,255,255,.02)}
  .date{display:flex; gap:10px; align-items:baseline}
  .day{font-weight:700}
  .y{color:var(--muted); font-size:12px}
  .check{display:flex; align-items:center; gap:10px}
  input[type="checkbox"]{
    width:18px; height:18px; cursor:pointer; accent-color: var(--ok);
  }
  .footer{
    padding:16px 18px; color:var(--muted); font-size:12px
  }
  .empty{
    padding:28px; text-align:center; color:var(--muted)
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <header>
        <h1>✅ 打卡进度</h1>
        <div class="row">
          <label>筛选年份
            <select id="yearFilter">
              <option value="all">全部年份</option>
            </select>
          </label>
        </div>
      </header>

      <div class="stats">
        <span class="pill">已完成 <span id="done" class="strong">0</span> / <span id="total">0</span></span>
        <div class="bar"><i id="barFill"></i></div>
        <span class="pill"><span id="percent" class="strong">0%</span></span>
		
      </div>
	  

      <table class="table" id="table">
        <thead>
          <tr>
            <th style="width:220px">日期</th>
            <th style="width:120px">完成</th>
            <th>备注</th>
          </tr>
        </thead>
        <tbody id="tbody"></tbody>
      </table>

      <div class="footer">数据保存在本地浏览器（localStorage）。</div>
    </div>
  </div>

<script>
(() => {
  const $ = s => document.querySelector(s);
  const startDate = new Date("2023-07-10");
  const endDate = new Date();
  const tbody = $('#tbody');
  const yearFilter = $('#yearFilter');
  const doneEl = $('#done');
  const totalEl = $('#total');
  const percentEl = $('#percent');
  const barFill = $('#barFill');

  const keyFor = dateStr => `tracker.done.${dateStr}`;
  const noteKeyFor = dateStr => `tracker.note.${dateStr}`;

  const rows = [];
  const years = new Set();
  let todayRow = null;

  for(let d = new Date(startDate); d <= endDate; d.setDate(d.getDate() + 1)){
    const yyyy = d.getFullYear();
    const mm = String(d.getMonth()+1).padStart(2,'0');
    const dd = String(d.getDate()).padStart(2,'0');
    const iso = `${yyyy}-${mm}-${dd}`;
    years.add(yyyy);
    rows.push({iso, yyyy, mm, dd});
  }

  function fillYearFilter(){
    yearFilter.innerHTML = `<option value="all">全部年份</option>` + [...years].sort().map(y=>`<option value="${y}">${y}</option>`).join('');
  }

  function render(){
    const filter = yearFilter.value;
    const view = filter === 'all' ? rows : rows.filter(r => String(r.yyyy) === filter);

    tbody.innerHTML = '';
    view.forEach(({iso, yyyy, mm, dd})=>{
      const tr = document.createElement('tr');
      const tdDate = document.createElement('td');
      tdDate.innerHTML = `<div class="date"><div class="day">${mm}-${dd}</div><div class="y">${yyyy}</div></div>`;
      const tdCheck = document.createElement('td');
      tdCheck.className = 'check';
      const cb = document.createElement('input');
      cb.type = 'checkbox';
      cb.checked = localStorage.getItem(keyFor(iso)) === '1';
      cb.addEventListener('change',()=>{
        localStorage.setItem(keyFor(iso), cb.checked ? '1' : '0');
        updateTotals();
      });
      tdCheck.append(cb);

      const tdNote = document.createElement('td');
      const note = document.createElement('input');
      note.type = 'text';
      note.value = localStorage.getItem(noteKeyFor(iso)) || '';
      note.placeholder = '备注...';
      note.style.cssText = 'width:100%; padding:6px; border-radius:6px; border:1px solid var(--border); background:var(--soft); color:var(--text)';
      note.addEventListener('input',()=>{
        localStorage.setItem(noteKeyFor(iso), note.value.trim());
      });
      tdNote.append(note);

      tr.append(tdDate, tdCheck, tdNote);
      tbody.append(tr);

      if(iso === new Date().toISOString().slice(0,10)){
        todayRow = tr;
      }
    });
    updateTotals();
  }

  function updateTotals(){
    const done = rows.reduce((acc,r)=> acc + (localStorage.getItem(keyFor(r.iso))==='1' ? 1 : 0),0);
    const total = rows.length;
    doneEl.textContent = done;
    totalEl.textContent = total;
    const pct = total ? Math.round(done*100/total) : 0;
    percentEl.textContent = pct + '%';
    barFill.style.width = pct + '%';
  }

  yearFilter.addEventListener('change', render);

  fillYearFilter();
  render();

  // 自动滚动到今天
  if(todayRow){
    setTimeout(()=> todayRow.scrollIntoView({behavior:'smooth', block:'center'}), 300);
  }
})();
</script>
</body>
</html>
